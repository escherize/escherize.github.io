{"version":3,"sources":["reitit/coercion.cljc"],"mappings":"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","names":["x__4433__auto__","m__4434__auto__","reitit.coercion/-get-name","goog/typeOf","m__4431__auto__","cljs.core/missing-protocol","reitit.coercion/-get-options","reitit.coercion/-get-apidocs","reitit.coercion/-compile-model","reitit.coercion/-open-model","reitit.coercion/-encode-error","reitit.coercion/-request-coercer","reitit.coercion/-response-coercer","reitit.coercion/Coercion","this","specification","data","model","name","error","type","this__4385__auto__","k__4386__auto__","this__4387__auto__","k44165","else__4388__auto__","G__44170","cljs.core.get.cljs$core$IFn$_invoke$arity$3","__extmap","this__4404__auto__","f__4405__auto__","init__4406__auto__","cljs.core.reduce.cljs$core$IFn$_invoke$arity$3","ret__4407__auto__","p__44172","vec__44173","k__4408__auto__","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","v__4409__auto__","this__4399__auto__","writer__4400__auto__","opts__4401__auto__","pr-pair__4402__auto__","keyval__4403__auto__","cljs.core/pr-sequential-writer","cljs.core.concat.cljs$core$IFn$_invoke$arity$2","G__44164","cljs.core/RecordIter","cljs.core/-iterator","cljs.core/nil-iter","this__4383__auto__","__meta","this__4380__auto__","__hash","this__4389__auto__","cljs.core/count","this__4381__auto__","h__4243__auto__","fexpr__44176","coll__4382__auto__","cljs.core/hash-unordered-coll","this44166","other44167","cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2","this__4394__auto__","k__4395__auto__","cljs.core/contains?","cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2","cljs.core/-with-meta","cljs.core.into.cljs$core$IFn$_invoke$arity$2","cljs.core/not-empty","this__4392__auto__","k__4393__auto__","pred__44186","cljs.core/keyword-identical?","expr__44187","cljs.core.assoc.cljs$core$IFn$_invoke$arity$3","this__4397__auto__","cljs.core/seq","this__4384__auto__","this__4390__auto__","entry__4391__auto__","cljs.core/vector?","cljs.core._nth.cljs$core$IFn$_invoke$arity$2","cljs.core/-conj","reitit.coercion/CoercionError","this__4428__auto__","cljs.core/List","writer__4429__auto__","cljs.core/-write","G__44168","extmap__4424__auto__","G__44206","cljs.core.dissoc.cljs$core$IFn$_invoke$arity$1","cljs.core/record?","reitit.coercion/->CoercionError","reitit.coercion/map->CoercionError","reitit.coercion/error?","x","k44208","G__44212","cljs.core/Keyword","in","style","keywordize?","open?","p__44213","vec__44214","cljs.core/PersistentVector","G__44207","fexpr__44225","this44209","other44210","pred__44232","expr__44233","G__44235","G__44236","G__44237","G__44238","G__44239","G__44240","G__44241","G__44242","cljs.core/MapEntry","reitit.coercion/ParameterCoercion","G__44211","G__44249","cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic","reitit.coercion/->ParameterCoercion","reitit.coercion/map->ParameterCoercion","reitit.coercion/default-parameter-coercion","reitit.coercion/request-coercion-failed!","result","coercion","value","request","cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2","cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic","cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic","reitit.coercion/response-coercion-failed!","response","reitit.coercion/extract-request-format-default","p__44255","map__44256","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","extract-request-format","parameter-coercion","reitit.coercion/request-coercer","temp__5733__auto__","map__44258","cljs.core.get.cljs$core$IFn$_invoke$arity$2","transform","cljs.core.comp.cljs$core$IFn$_invoke$arity$2","clojure.walk/keywordize-keys","cljs.core/identity","coercer","format","reitit.coercion/extract-response-format-default","_","p__44261","map__44262","reitit.coercion/response-coercer","body","extract-response-format","reitit.coercion/encode-error","cljs.core.update.cljs$core$IFn$_invoke$arity$3","reitit.coercion/coerce-request","coercers","cljs.core/reduce-kv","acc","k","reitit.impl/fast-assoc","reitit.coercion/coerce-response","or__4131__auto__","G__44278","G__44279","reitit.coercion/request-coercers","parameters","opts","iter__4523__auto__","s__44281","cljs.core/LazySeq","temp__5735__auto__","cljs.core/chunked-seq?","c__4521__auto__","size__4522__auto__","b__44283","cljs.core/chunk-buffer","i__44282","vec__44285","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__44280","cljs.core/chunk-rest","vec__44290","cljs.core/first","cljs.core/cons","cljs.core/rest","v","cljs.core.filter.cljs$core$IFn$_invoke$arity$2","cljs.core/second","reitit.coercion/response-coercers","responses","s__44294","b__44296","i__44295","vec__44299","map__44302","iter__44293","vec__44306","map__44309","status","reitit.coercion/get-apidocs","swagger-parameter","G__44314","js/Error","cljs.core.map.cljs$core$IFn$_invoke$arity$2","p__44315","vec__44319","p__44334","vec__44335","map__44338","reitit.coercion/compile-request-coercers","and__4120__auto__","reitit.coercion/coerce!","match","cljs.core/chunk-first"],"sourcesContent":["(ns reitit.coercion\n  (:require [clojure.walk :as walk]\n            [reitit.impl :as impl])\n  #?(:clj\n     (:import (java.io Writer))))\n\n;;\n;; Protocol\n;;\n\n(defprotocol Coercion\n  \"Pluggable coercion protocol\"\n  (-get-name [this] \"Keyword name for the coercion\")\n  (-get-options [this] \"Coercion options\")\n  (-get-apidocs [this specification data] \"Returns api documentation\")\n  (-compile-model [this model name] \"Compiles a model\")\n  (-open-model [this model] \"Returns a new model which allows extra keys in maps\")\n  (-encode-error [this error] \"Converts error in to a serializable format\")\n  (-request-coercer [this type model] \"Returns a `value format => value` request coercion function\")\n  (-response-coercer [this model] \"Returns a `value format => value` response coercion function\"))\n\n#?(:clj\n   (defmethod print-method ::coercion [coercion ^Writer w]\n     (.write w (str \"<<\" (-get-name coercion) \">>\"))))\n\n(defrecord CoercionError [])\n\n(defn error? [x]\n  (instance? CoercionError x))\n\n;;\n;; coercer\n;;\n\n(defrecord ParameterCoercion [in style keywordize? open?])\n\n(def ^:no-doc default-parameter-coercion\n  {:query (->ParameterCoercion :query-params :string true true)\n   :body (->ParameterCoercion :body-params :body false false)\n   :form (->ParameterCoercion :form-params :string true true)\n   :header (->ParameterCoercion :headers :string true true)\n   :path (->ParameterCoercion :path-params :string true true)})\n\n(defn ^:no-doc request-coercion-failed! [result coercion value in request]\n  (throw\n    (ex-info\n      (str \"Request coercion failed: \" (pr-str result))\n      (merge\n        (into {} result)\n        {:type ::request-coercion\n         :coercion coercion\n         :value value\n         :in [:request in]\n         :request request}))))\n\n(defn ^:no-doc response-coercion-failed! [result coercion value request response]\n  (throw\n    (ex-info\n      (str \"Response coercion failed: \" (pr-str result))\n      (merge\n        (into {} result)\n        {:type ::response-coercion\n         :coercion coercion\n         :value value\n         :in [:response :body]\n         :request request\n         :response response}))))\n\n(defn extract-request-format-default [request]\n  (-> request :muuntaja/request :format))\n\n;; TODO: support faster key walking, walk/keywordize-keys is quite slow...\n(defn request-coercer [coercion type model {:keys [::extract-request-format ::parameter-coercion]\n                                            :or {extract-request-format extract-request-format-default\n                                                 parameter-coercion default-parameter-coercion}}]\n  (if coercion\n    (if-let [{:keys [keywordize? open? in style]} (parameter-coercion type)]\n      (let [transform (comp (if keywordize? walk/keywordize-keys identity) in)\n            model (if open? (-open-model coercion model) model)\n            coercer (-request-coercer coercion style model)]\n        (fn [request]\n          (let [value (transform request)\n                format (extract-request-format request)\n                result (coercer value format)]\n            (if (error? result)\n              (request-coercion-failed! result coercion value in request)\n              result)))))))\n\n(defn extract-response-format-default [request _]\n  (-> request :muuntaja/response :format))\n\n(defn response-coercer [coercion body {:keys [extract-response-format]\n                                       :or {extract-response-format extract-response-format-default}}]\n  (if coercion\n    (let [coercer (-response-coercer coercion body)]\n      (fn [request response]\n        (let [format (extract-response-format request response)\n              value (:body response)\n              result (coercer value format)]\n          (if (error? result)\n            (response-coercion-failed! result coercion value request response)\n            result))))))\n\n(defn encode-error [data]\n  (-> data\n      (dissoc :request :response)\n      (update :coercion -get-name)\n      (->> (-encode-error (:coercion data)))))\n\n(defn coerce-request [coercers request]\n  (reduce-kv\n    (fn [acc k coercer]\n      (impl/fast-assoc acc k (coercer request)))\n    {}\n    coercers))\n\n(defn coerce-response [coercers request response]\n  (if response\n    (if-let [coercer (or (coercers (:status response)) (coercers :default))]\n      (impl/fast-assoc response :body (coercer request response))\n      response)))\n\n(defn request-coercers [coercion parameters opts]\n  (->> (for [[k v] parameters\n             :when v]\n         [k (request-coercer coercion k v opts)])\n       (filter second)\n       (into {})))\n\n(defn response-coercers [coercion responses opts]\n  (->> (for [[status {:keys [body]}] responses :when body]\n         [status (response-coercer coercion body opts)])\n       (into {})))\n\n;;\n;; api-docs\n;;\n\n(defn get-apidocs [this specification data]\n  (let [swagger-parameter {:query :query\n                           :body :body\n                           :form :formData\n                           :header :header\n                           :path :path\n                           :multipart :formData}]\n    (case specification\n      :swagger (->> (update\n                      data\n                      :parameters\n                      (fn [parameters]\n                        (->> parameters\n                             (map (fn [[k v]] [(swagger-parameter k) v]))\n                             (filter first)\n                             (into {}))))\n                    (-get-apidocs this specification)))))\n\n;;\n;; integration\n;;\n\n(defn compile-request-coercers\n  \"A router :compile implementation which reads the `:parameters`\n  and `:coercion` data to create compiled coercers into Match under\n  `:result. A pre-requisite to use [[coerce!]].\"\n  [[_ {:keys [parameters coercion]}] opts]\n  (if (and parameters coercion)\n    (request-coercers coercion parameters opts)))\n\n(defn coerce!\n  \"Returns a map of coerced input parameters using pre-compiled\n  coercers under `:result` (provided by [[compile-request-coercers]].\n  Throws `ex-info` if parameters can't be coerced\n  If coercion or parameters are not defined, return `nil`\"\n  [match]\n  (if-let [coercers (:result match)]\n    (coerce-request coercers match)))\n"]}